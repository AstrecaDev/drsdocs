## Opportunity

<!-- Object description -->

## Fields

| Name      | Label | Type | Description |
| :-------- | :---- | :--: | :---------- | 
| AccountId |  | Lookup | <!-- --> |
| Action_Date__c | Action Date | Date | Next Step Date |
| Amount |  |  | <!-- --> |
| Application__c | Application | MultiselectPicklist | Same as Leads |
| Application_Other__c | Application Other | Text | Enter application if Other selected |
| Asset__c | Asset | Lookup | <!-- --> |
| Average_Power__c | Average Power (mW) | Number | <!-- --> |
| Budget_Constraints_Comments__c | Budget Constraints Comments | TextArea | <!-- --> |
| Budget_Contraints_Rating__c | Budget Contraints Rating | Picklist | <!-- --> |
| Budget_Quote__c | Budget Quote | Checkbox | <!-- --> |
| CampaignId |  | Lookup | <!-- --> |
| CloseDate |  |  | <!-- --> |
| Competitive_Pricing_Comment__c | Competitive Pricing Comment | TextArea | <!-- --> |
| Competitive_Pricing_Rating__c | Competitive Pricing Rating | Picklist | <!-- --> |
| Contact_Role_EDM__c | Contact Role EDM | Checkbox | This checkbox is created by astreca to cross-check Contact Role on Opportunity is Economic Decision Maker |
| ContractId |  | Lookup | <!-- --> |
| Delivery_Date__c | Delivery Date | Date | Delivery Date should be populated when in Need By stage. |
| Description |  |  | <!-- --> |
| Duration__c | Duration (months) | Number | Period of Performance in months |
| Duration_NN__c | Duration | Number | <!-- --> |
| End_Date__c | End Date | Date | <!-- --> |
| ExpectedRevenue |  |  | <!-- --> |
| For_Closed_Won__c | For Closed Won | Checkbox | This field is created by Astreca to make opportunity as closed won from automation |
| Funding_Date__c | Funding Date | Date | <!-- --> |
| Funding_Source__c | Funding Source | Text | Funding Source |
| GCLID__c | GCLID | TextArea | Google Click ID for tracking AdWords |
| Has_Contact_Role_as_DM__c | Has Contact Role as DM | Checkbox | This field is created by Astreca to manage the opportunity stage automatically. This checkbox checked when Opportunity has Contact Role and having role as Desicison Maker |
| Has_Notes_Attachment__c | Has Notes & Attachment (Demo/Email) | Checkbox | This field is created by Astreca to manage the opportunity stage automatically |
| IqScore |  |  | <!-- --> |
| IsPrivate |  |  | <!-- --> |
| Lead_Source_Comment__c | Lead Source Comment | Text | <!-- --> |
| Lead_Source_Identifier__c | Lead Source Identifier | Picklist | <!-- --> |
| LeadSource |  | Picklist | <!-- --> |
| LOB__c | LOB | Picklist | Line of Business |
| Lost_Reason__c | Lost Reason | Picklist | This picklist is created by Astreca when Opportunity stage = closed lost then Lost reason should on Opportunity |
| Market_Segment__c | Market Segment | Picklist | Market Segment |
| Name |  |  | <!-- --> |
| Next_Submission__c | Next Submission | Picklist | <!-- --> |
| NextStep |  |  | <!-- --> |
| Notes_Attachments_Add_EUS__c | Notes & Attachments - Add EUS | Checkbox | This field is created by astreca to update Opportunity stage |
| Notes_Attachments_Add_Visual_Complia__c | Notes & Attachments - Add Visual Complia | Checkbox | This field is created by Astreca for opportunity stage update |
| Notes_Attachments_Approved_Contract__c | Notes & Attachments (Approved Contract) | Checkbox | This checkbox is created by Astreca to update Opportunity Stage based on required fields |
| Notes_Post_Mortem__c | Notes (Post-Mortem) | Checkbox | This checkbox is created by Astreca to make stage as closed lost on Opportunity |
| Opportunity_Type__c | Opportunity Type | Picklist | Same as Account Type |
| Opt_Out_Stage__c | Opt Out Stage | Checkbox | This checkbox is created by Astreca team to make opportunity stage to any stage irrespective of required fields |
| OwnerId |  | Lookup | <!-- --> |
| P_Go__c | P Go | Percent | <!-- --> |
| P_Win__c | P Win | Percent | <!-- --> |
| Price_Notes__c | Price Notes | LongTextArea | <!-- --> |
| Pricebook2Id |  | Lookup | <!-- --> |
| Primary_Contact__c | Primary Contact | Lookup | <!-- --> |
| Primary_Contact_Email__c | Primary Contact Email | Text | <!-- --> |
| Primary_Contact_Fax__c | Primary Contact Fax | Text | <!-- --> |
| Primary_Contact_Phone__c | Primary Contact Phone | Text | <!-- --> |
| PrimaryContactName__c | PrimaryContactName | Text | This is  Primary contact name of the Opportunity. This field will update it's value based on the Primary contact field .This field is used to make Opportunity searchable in Global Search. |
| Priority__c | Priority | Picklist | <!-- --> |
| Probability |  |  | <!-- --> |
| probability_rating__c | Probability Rating | Text | <!-- --> |
| Probable_Close_Date__c | Probable Close Date | Date | <!-- --> |
| Product__c | Product | Picklist | <!-- --> |
| Product_Features_Comments__c | Product Features Comments | TextArea | <!-- --> |
| Product_Features_Rating__c | Product Features Rating | Picklist | <!-- --> |
| Product_Line_Family__c | Product Line Family | Picklist | <!-- --> |
| Product_Subtype__c | Product Subtype | MultiselectPicklist | <!-- --> |
| Project_Abandoned__c | Project Abandoned | Checkbox | <!-- --> |
| Project_Abandoned_Comments__c | Project Abandoned Comments | TextArea | <!-- --> |
| Purchase_Order__c | Purchase Order # | Text | <!-- --> |
| QCL_Center_Wavelength__c | QCL/DL Center Wavelength (um) | MultiselectPicklist | Same as Leads |
| QCL_Module_Option_1__c | QCL Module (Option 1) | Picklist | <!-- --> |
| QCL_Module_Option_2__c | QCL Module (Option 2) | Picklist | <!-- --> |
| QCL_Module_Option_3__c | QCL Module (Option 3) | Picklist | <!-- --> |
| QCL_Module_Option_4__c | QCL Module (Option 4) | Picklist | <!-- --> |
| Quote_Sent_Check__c | Quote Sent Check | Checkbox | This checkbox is created by Astreca team to check Quote Status is equal to Quote Sent |
| Record_ID__c | Record ID | AutoNumber | <!-- --> |
| Relationship_Comment__c | Relationship Comment | TextArea | <!-- --> |
| Relationship_Rating__c | Relationship Rating | Picklist | <!-- --> |
| Requested_Ship_date__c | Requested Ship date | Date | <!-- --> |
| Revenue_Per_Month__c | Revenue Per Month | Currency | <!-- --> |
| Sales_Discount__c | Sales Discount | Percent | <!-- --> |
| Sales_Order__c | Sales Order # | Text | <!-- --> |
| Schedule_Comments__c | Schedule Comments | TextArea | <!-- --> |
| Schedule_Rating__c | Schedule Rating | Picklist | <!-- --> |
| Stage_Score__c | Stage Score | Percent | <!-- --> |
| StageName |  | Picklist | <!-- --> |
| Standard_Price__c | Standard Price | Currency | <!-- --> |
| Submission_Due_Date__c | Submission Due Date | Date | <!-- --> |
| Submission_Status__c | Submission Status | Picklist | <!-- --> |
| SyncedQuoteId |  | Lookup | <!-- --> |
| Target_Center_Wavenumber__c | Target Center Wavenumber (cm-1) | Number | <!-- --> |
| Target_Wavenumber_Range__c | Target Wavenumber Range (cm-1) | Number | Same as Leads |
| Technology_Comments__c | Technology Comments | TextArea | <!-- --> |
| Technology_Rating__c | Technology Rating | Picklist | <!-- --> |
| TotalOpportunityQuantity |  |  | <!-- --> |
| Transfer_Discount__c | Transfer Discount | Percent | <!-- --> |
| Type |  | Picklist | <!-- --> |
| Visual_Compliance__c | Visual Compliance Check | Checkbox | Have you conducted a satisfactory visual compliance check before all international orders are accepted? |

## Validation Rules

| Rule      | Active | Description | Formula |
| :-------- | :---- | :---------- | :------ |
| Average_Power_Validation | Yes |  | `Average_Power__c  < 0` |
| Required_When_Closed | No ⚠️ |  | `AND( IsClosed , OR(
ISPICKVAL( Budget_Contraints_Rating__c  ,""),
ISPICKVAL( Competitive_Pricing_Rating__c  ,""),
ISPICKVAL(  Product_Features_Rating__c  ,""),
ISPICKVAL(Relationship_Rating__c ,"")))` |
| Target_Center_Wavelength_Validation | Yes | Target Center Wavelength must be between 900 and 3500 | `OR(Target_Center_Wavenumber__c <900,Target_Center_Wavenumber__c  >3500)` |


## Related Flows

| Object | Name      | Type | Description |
| :----  | :-------- | :--: | :---------- | 
| 💻 | [New_Quote](../flows/New_Quote.md) |  Screen Flow | This is used for a new quote button and will set default fields. |
| Opportunity | [Send_Email_Opportunity_Closed_Won](../flows/Send_Email_Opportunity_Closed_Won.md) |  Record After Save | This flow is used to send an email after 3 weeks to the Primary Contact when the Opportunity is Closed Won + added one min delay for testing |
| Opportunity | [Update_Lost_Reason_and_Post_Mortem_to_Blank](../flows/Update_Lost_Reason_and_Post_Mortem_to_Blank.md) |  Record Before Save | <!-- --> |
| Opportunity | [Update_Opportunity_Stage_based_on_Criteria](../flows/Update_Opportunity_Stage_based_on_Criteria.md) |  Record After Save | This flow is checking required fields before update Stage on Opportunity + Update Closed Lost or Qualification Open + updated 17 May 24 + Added condition for For Closed won checkbox v2 |
| OpportunityContactRole | [Delete_Opp_Primary_Contact](../flows/Delete_Opp_Primary_Contact.md) |  Record Before Delete | This flow will clear the PrimaryContactName__c & Primary_Contact__c fields when Associated Contact role is deleted |
| OpportunityContactRole | [Update_Has_Contact_Role_on_Opp](../flows/Update_Has_Contact_Role_on_Opp.md) |  Record After Save | <!-- --> |
| OpportunityContactRole | [Update_Opp_Primary_Contact](../flows/Update_Opp_Primary_Contact.md) |  Record After Save | In this version PrimaryContactName__c  field is updated with Primary Contact's Name to make Opportunity searchable in Global Search. With added fault path |
| Quote | [Auto_Populate_Opportunity_and_Contact_Info_to_Quote](../flows/Auto_Populate_Opportunity_and_Contact_Info_to_Quote.md) |  Record After Save | This flow will fire on Quote Creation and Updation ,It will update Contact on quote from Opportunity Contact Role if Role is Decision Maker and Type = Sales// Added Email ,Bill & ship to Contact,Phone & Fax on 4th April |
| Quote | [Update_Opportunity_based_on_Quote_Status](../flows/Update_Opportunity_based_on_Quote_Status.md) |  Record After Save | This flow is used to update Opportunity checkbox based on Quote Status |


## Related Apex Classes

| Apex Class | Type |
| :----      | :--: | 
| [DeleteQuoteLineItemsTest](../apex/DeleteQuoteLineItemsTest.md) | Test |
| [GetoliTest](../apex/GetoliTest.md) | Test |
| [GetqlinesTest](../apex/GetqlinesTest.md) | Test |
| [OppLineItemControllerTest](../apex/OppLineItemControllerTest.md) | Test |
| [QliExtensionTest](../apex/QliExtensionTest.md) | Test |
| [QuoteLineItemControllerTest](../apex/QuoteLineItemControllerTest.md) | Test |
| [QuoteLineItemsExtensionTest](../apex/QuoteLineItemsExtensionTest.md) | Test |
| [QuoteTriggerTest](../apex/QuoteTriggerTest.md) | Test |
| [SavedocclassTest](../apex/SavedocclassTest.md) | Test |


## Related Lightning Pages

| Lightning Page | Type |
| :----      | :--: | 
| [Opportunity_Record_Page2](../pages/Opportunity_Record_Page2.md) |  Record Page |
| [Quote_Record_Page](../pages/Quote_Record_Page.md) |  Record Page |


_Documentation generated with [sfdx-hardis](https://sfdx-hardis.cloudity.com)_
